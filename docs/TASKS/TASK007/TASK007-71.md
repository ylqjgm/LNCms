# TASK007-71: 配置内容管理API路由

## 任务信息

**任务编号**: TASK007-71  
**父任务**: TASK007  
**任务名称**: 配置内容管理API路由  
**版本信息**: v1.2.0  
**当前状态**: 计划中  
**创建时间**: 2026-01-04 00:11:24 CST

## 任务描述

配置内容管理的API路由。包括：1) 在路由配置文件中定义所有内容管理路由；2) 配置公开路由（列表查询、详情查询）；3) 配置需要认证的路由（创建、更新、删除等）；4) 配置需要管理员权限的路由（管理操作）；5) 配置JWT认证中间件和权限中间件。所有路由必须遵循OpenAPI 3.1.1规范，路径使用/api/v1前缀。

## 依赖任务

TASK007-55（创建CategoryHandler接口和实现）、TASK007-56（创建RegionHandler接口和实现）、TASK007-57（创建TagHandler接口和实现）、TASK007-60（创建NovelHandler接口和实现 - 状态和删除API）、TASK007-61（创建NovelVolumeHandler和NovelChapterHandler接口和实现）、TASK007-63（创建ComicHandler接口和实现 - 创建、更新和删除API）、TASK007-64（创建ComicChapterHandler接口和实现）、TASK007-66（创建AudioHandler接口和实现 - 创建、更新和删除API）、TASK007-67（创建AudioSeasonHandler和AudioEpisodeHandler接口和实现）、TASK007-69（创建VideoHandler接口和实现 - 创建、更新和删除API）、TASK007-70（创建VideoSeasonHandler和VideoEpisodeHandler接口和实现）

## 实现指南

### 1. 创建内容管理路由配置文件

在 `internal/router/` 或 `internal/http/` 目录下创建 `content_routes.go` 文件：

```go
package router

import (
    "github.com/gin-gonic/gin"
    
    "yourproject/internal/handler"
    "yourproject/internal/middleware"
    "yourproject/internal/service"
)

// SetupContentRoutes 配置内容管理路由
func SetupContentRoutes(
    router *gin.RouterGroup,
    categoryHandler handler.CategoryHandler,
    regionHandler handler.RegionHandler,
    tagHandler handler.TagHandler,
    novelHandler handler.NovelHandler,
    novelVolumeHandler handler.NovelVolumeHandler,
    novelChapterHandler handler.NovelChapterHandler,
    comicHandler handler.ComicHandler,
    comicChapterHandler handler.ComicChapterHandler,
    audioHandler handler.AudioHandler,
    audioSeasonHandler handler.AudioSeasonHandler,
    audioEpisodeHandler handler.AudioEpisodeHandler,
    videoHandler handler.VideoHandler,
    videoSeasonHandler handler.VideoSeasonHandler,
    videoEpisodeHandler handler.VideoEpisodeHandler,
    jwtService service.JWTService,
) {
    // 基础数据路由组
    setupBasicDataRoutes(router, categoryHandler, regionHandler, tagHandler, jwtService)
    
    // 小说管理路由组
    setupNovelRoutes(router, novelHandler, novelVolumeHandler, novelChapterHandler, jwtService)
    
    // 漫画管理路由组
    setupComicRoutes(router, comicHandler, comicChapterHandler, jwtService)
    
    // 音频管理路由组
    setupAudioRoutes(router, audioHandler, audioSeasonHandler, audioEpisodeHandler, jwtService)
    
    // 视频管理路由组
    setupVideoRoutes(router, videoHandler, videoSeasonHandler, videoEpisodeHandler, jwtService)
}
```

### 2. 配置基础数据路由（分类、地区、标签）

```go
// setupBasicDataRoutes 配置基础数据路由（分类、地区、标签）
func setupBasicDataRoutes(
    router *gin.RouterGroup,
    categoryHandler handler.CategoryHandler,
    regionHandler handler.RegionHandler,
    tagHandler handler.TagHandler,
    jwtService service.JWTService,
) {
    // 分类管理路由
    categories := router.Group("/categories")
    {
        // 公开路由（无需认证）
        categories.GET("", categoryHandler.GetCategories)        // 获取分类列表（支持树形结构）
        categories.GET("/:id", categoryHandler.GetCategory)     // 获取分类详情
        
        // 需要管理员权限的路由
        categoriesAdmin := categories.Group("", middleware.JWTAuthMiddleware(jwtService))
        // 如果权限中间件已实现，添加：
        // categoriesAdmin.Use(middleware.RequireAdmin())
        {
            categoriesAdmin.POST("", categoryHandler.CreateCategory)        // 创建分类
            categoriesAdmin.PUT("/:id", categoryHandler.UpdateCategory)    // 更新分类
            categoriesAdmin.DELETE("/:id", categoryHandler.DeleteCategory) // 删除分类
        }
    }
    
    // 地区管理路由
    regions := router.Group("/regions")
    {
        // 公开路由（无需认证）
        regions.GET("", regionHandler.GetRegions)        // 获取地区列表（支持树形结构）
        regions.GET("/:id", regionHandler.GetRegion)     // 获取地区详情
        
        // 需要管理员权限的路由
        regionsAdmin := regions.Group("", middleware.JWTAuthMiddleware(jwtService))
        // 如果权限中间件已实现，添加：
        // regionsAdmin.Use(middleware.RequireAdmin())
        {
            regionsAdmin.POST("", regionHandler.CreateRegion)        // 创建地区
            regionsAdmin.PUT("/:id", regionHandler.UpdateRegion)    // 更新地区
            regionsAdmin.DELETE("/:id", regionHandler.DeleteRegion) // 删除地区
        }
    }
    
    // 标签管理路由
    tags := router.Group("/tags")
    {
        // 公开路由（无需认证）
        tags.GET("", tagHandler.GetTags)        // 获取标签列表（支持分页、筛选、排序）
        tags.GET("/:id", tagHandler.GetTag)    // 获取标签详情
        
        // 需要管理员权限的路由
        tagsAdmin := tags.Group("", middleware.JWTAuthMiddleware(jwtService))
        // 如果权限中间件已实现，添加：
        // tagsAdmin.Use(middleware.RequireAdmin())
        {
            tagsAdmin.POST("", tagHandler.CreateTag)        // 创建标签
            tagsAdmin.PUT("/:id", tagHandler.UpdateTag)    // 更新标签
            tagsAdmin.DELETE("/:id", tagHandler.DeleteTag) // 删除标签
        }
    }
}
```

### 3. 配置小说管理路由

```go
// setupNovelRoutes 配置小说管理路由
func setupNovelRoutes(
    router *gin.RouterGroup,
    novelHandler handler.NovelHandler,
    novelVolumeHandler handler.NovelVolumeHandler,
    novelChapterHandler handler.NovelChapterHandler,
    jwtService service.JWTService,
) {
    novels := router.Group("/novels")
    {
        // 公开路由（无需认证）
        novels.GET("", novelHandler.GetNovels)        // 获取小说列表（支持分页、筛选、排序）
        novels.GET("/:id", novelHandler.GetNovel)    // 获取小说详情
        
        // 需要认证的路由（作者或管理员）
        novelsAuth := novels.Group("", middleware.JWTAuthMiddleware(jwtService))
        {
            novelsAuth.POST("", novelHandler.CreateNovel)                    // 创建小说
            novelsAuth.PUT("/:id", novelHandler.UpdateNovel)                 // 更新小说
            novelsAuth.PUT("/:id/status", novelHandler.UpdateNovelStatus)     // 更新小说状态
            novelsAuth.DELETE("/:id", novelHandler.DeleteNovel)              // 删除小说
            
            // 小说分卷路由
            novelsAuth.GET("/:id/volumes", novelVolumeHandler.GetVolumes)              // 获取分卷列表
            novelsAuth.GET("/:id/volumes/:volumeId", novelVolumeHandler.GetVolume)   // 获取分卷详情
            novelsAuth.POST("/:id/volumes", novelVolumeHandler.CreateVolume)         // 创建分卷
            novelsAuth.PUT("/:id/volumes/:volumeId", novelVolumeHandler.UpdateVolume) // 更新分卷
            novelsAuth.DELETE("/:id/volumes/:volumeId", novelVolumeHandler.DeleteVolume) // 删除分卷
            
            // 小说章节路由
            novelsAuth.GET("/:id/chapters", novelChapterHandler.GetChapters)              // 获取章节列表
            novelsAuth.GET("/:id/chapters/:chapterId", novelChapterHandler.GetChapter)  // 获取章节详情
            novelsAuth.POST("/:id/chapters", novelChapterHandler.CreateChapter)          // 创建章节
            novelsAuth.PUT("/:id/chapters/:chapterId", novelChapterHandler.UpdateChapter) // 更新章节
            novelsAuth.DELETE("/:id/chapters/:chapterId", novelChapterHandler.DeleteChapter) // 删除章节
            novelsAuth.PUT("/:id/chapters/:chapterId/status", novelChapterHandler.UpdateChapterStatus) // 更新章节状态
        }
    }
}
```

### 4. 配置漫画管理路由

```go
// setupComicRoutes 配置漫画管理路由
func setupComicRoutes(
    router *gin.RouterGroup,
    comicHandler handler.ComicHandler,
    comicChapterHandler handler.ComicChapterHandler,
    jwtService service.JWTService,
) {
    comics := router.Group("/comics")
    {
        // 公开路由（无需认证）
        comics.GET("", comicHandler.GetComics)        // 获取漫画列表（支持分页、筛选、排序）
        comics.GET("/:id", comicHandler.GetComic)     // 获取漫画详情
        
        // 需要认证的路由（作者或管理员）
        comicsAuth := comics.Group("", middleware.JWTAuthMiddleware(jwtService))
        {
            comicsAuth.POST("", comicHandler.CreateComic)                    // 创建漫画
            comicsAuth.PUT("/:id", comicHandler.UpdateComic)                 // 更新漫画
            comicsAuth.PUT("/:id/status", comicHandler.UpdateComicStatus)    // 更新漫画状态
            comicsAuth.DELETE("/:id", comicHandler.DeleteComic)             // 删除漫画
            
            // 漫画章节路由
            comicsAuth.GET("/:id/chapters", comicChapterHandler.GetChapters)              // 获取章节列表
            comicsAuth.GET("/:id/chapters/:chapterId", comicChapterHandler.GetChapter)  // 获取章节详情
            comicsAuth.POST("/:id/chapters", comicChapterHandler.CreateChapter)         // 创建章节
            comicsAuth.PUT("/:id/chapters/:chapterId", comicChapterHandler.UpdateChapter) // 更新章节
            comicsAuth.DELETE("/:id/chapters/:chapterId", comicChapterHandler.DeleteChapter) // 删除章节
            comicsAuth.PUT("/:id/chapters/:chapterId/status", comicChapterHandler.UpdateChapterStatus) // 更新章节状态
        }
    }
}
```

### 5. 配置音频管理路由

```go
// setupAudioRoutes 配置音频管理路由
func setupAudioRoutes(
    router *gin.RouterGroup,
    audioHandler handler.AudioHandler,
    audioSeasonHandler handler.AudioSeasonHandler,
    audioEpisodeHandler handler.AudioEpisodeHandler,
    jwtService service.JWTService,
) {
    audios := router.Group("/audios")
    {
        // 公开路由（无需认证）
        audios.GET("", audioHandler.GetAudios)        // 获取音频列表（支持分页、筛选、排序）
        audios.GET("/:id", audioHandler.GetAudio)     // 获取音频详情
        
        // 需要认证的路由（作者或管理员）
        audiosAuth := audios.Group("", middleware.JWTAuthMiddleware(jwtService))
        {
            audiosAuth.POST("", audioHandler.CreateAudio)                    // 创建音频
            audiosAuth.PUT("/:id", audioHandler.UpdateAudio)                 // 更新音频
            audiosAuth.PUT("/:id/status", audioHandler.UpdateAudioStatus)   // 更新音频状态
            audiosAuth.DELETE("/:id", audioHandler.DeleteAudio)             // 删除音频
            
            // 音频分季路由
            audiosAuth.GET("/:id/seasons", audioSeasonHandler.GetSeasons)              // 获取分季列表
            audiosAuth.GET("/:id/seasons/:seasonId", audioSeasonHandler.GetSeason)    // 获取分季详情
            audiosAuth.POST("/:id/seasons", audioSeasonHandler.CreateSeason)         // 创建分季
            audiosAuth.PUT("/:id/seasons/:seasonId", audioSeasonHandler.UpdateSeason) // 更新分季
            audiosAuth.DELETE("/:id/seasons/:seasonId", audioSeasonHandler.DeleteSeason) // 删除分季
            
            // 音频分集路由
            audiosAuth.GET("/:id/episodes", audioEpisodeHandler.GetEpisodes)              // 获取分集列表
            audiosAuth.GET("/:id/episodes/:episodeId", audioEpisodeHandler.GetEpisode)   // 获取分集详情
            audiosAuth.POST("/:id/episodes", audioEpisodeHandler.CreateEpisode)           // 创建分集
            audiosAuth.PUT("/:id/episodes/:episodeId", audioEpisodeHandler.UpdateEpisode) // 更新分集
            audiosAuth.DELETE("/:id/episodes/:episodeId", audioEpisodeHandler.DeleteEpisode) // 删除分集
            audiosAuth.PUT("/:id/episodes/:episodeId/status", audioEpisodeHandler.UpdateEpisodeStatus) // 更新分集状态
        }
    }
}
```

### 6. 配置视频管理路由

```go
// setupVideoRoutes 配置视频管理路由
func setupVideoRoutes(
    router *gin.RouterGroup,
    videoHandler handler.VideoHandler,
    videoSeasonHandler handler.VideoSeasonHandler,
    videoEpisodeHandler handler.VideoEpisodeHandler,
    jwtService service.JWTService,
) {
    videos := router.Group("/videos")
    {
        // 公开路由（无需认证）
        videos.GET("", videoHandler.GetVideos)        // 获取视频列表（支持分页、筛选、排序）
        videos.GET("/:id", videoHandler.GetVideo)     // 获取视频详情
        
        // 需要认证的路由（作者或管理员）
        videosAuth := videos.Group("", middleware.JWTAuthMiddleware(jwtService))
        {
            videosAuth.POST("", videoHandler.CreateVideo)                    // 创建视频
            videosAuth.PUT("/:id", videoHandler.UpdateVideo)                 // 更新视频
            videosAuth.PUT("/:id/status", videoHandler.UpdateVideoStatus)   // 更新视频状态
            videosAuth.DELETE("/:id", videoHandler.DeleteVideo)              // 删除视频
            
            // 视频分季路由
            videosAuth.GET("/:id/seasons", videoSeasonHandler.GetSeasons)              // 获取分季列表
            videosAuth.GET("/:id/seasons/:seasonId", videoSeasonHandler.GetSeason)     // 获取分季详情
            videosAuth.POST("/:id/seasons", videoSeasonHandler.CreateSeason)         // 创建分季
            videosAuth.PUT("/:id/seasons/:seasonId", videoSeasonHandler.UpdateSeason) // 更新分季
            videosAuth.DELETE("/:id/seasons/:seasonId", videoSeasonHandler.DeleteSeason) // 删除分季
            
            // 视频分集路由
            videosAuth.GET("/:id/episodes", videoEpisodeHandler.GetEpisodes)              // 获取分集列表
            videosAuth.GET("/:id/episodes/:episodeId", videoEpisodeHandler.GetEpisode)    // 获取分集详情
            videosAuth.POST("/:id/episodes", videoEpisodeHandler.CreateEpisode)         // 创建分集
            videosAuth.PUT("/:id/episodes/:episodeId", videoEpisodeHandler.UpdateEpisode) // 更新分集
            videosAuth.DELETE("/:id/episodes/:episodeId", videoEpisodeHandler.DeleteEpisode) // 删除分集
            videosAuth.PUT("/:id/episodes/:episodeId/status", videoEpisodeHandler.UpdateEpisodeStatus) // 更新分集状态
        }
    }
}
```

### 7. 在主路由文件中注册内容管理路由

在主路由文件（如 `router.go` 或 `routes.go`）中注册内容管理路由：

```go
package router

import (
    "github.com/gin-gonic/gin"
    
    "yourproject/internal/handler"
    "yourproject/internal/service"
)

// SetupRoutes 配置所有路由
func SetupRoutes(
    router *gin.Engine,
    userHandler handler.UserHandler,
    authorHandler handler.AuthorHandler,
    categoryHandler handler.CategoryHandler,
    regionHandler handler.RegionHandler,
    tagHandler handler.TagHandler,
    novelHandler handler.NovelHandler,
    novelVolumeHandler handler.NovelVolumeHandler,
    novelChapterHandler handler.NovelChapterHandler,
    comicHandler handler.ComicHandler,
    comicChapterHandler handler.ComicChapterHandler,
    audioHandler handler.AudioHandler,
    audioSeasonHandler handler.AudioSeasonHandler,
    audioEpisodeHandler handler.AudioEpisodeHandler,
    videoHandler handler.VideoHandler,
    videoSeasonHandler handler.VideoSeasonHandler,
    videoEpisodeHandler handler.VideoEpisodeHandler,
    jwtService service.JWTService,
) {
    // API版本路由组
    v1 := router.Group("/api/v1")
    {
        // 用户管理路由
        SetupUserRoutes(v1, userHandler, jwtService)
        
        // 作者管理路由
        SetupAuthorRoutes(v1, authorHandler, jwtService)
        
        // 内容管理路由
        SetupContentRoutes(
            v1,
            categoryHandler,
            regionHandler,
            tagHandler,
            novelHandler,
            novelVolumeHandler,
            novelChapterHandler,
            comicHandler,
            comicChapterHandler,
            audioHandler,
            audioSeasonHandler,
            audioEpisodeHandler,
            videoHandler,
            videoSeasonHandler,
            videoEpisodeHandler,
            jwtService,
        )
    }
}
```

### 8. 路由路径规范

所有内容管理路由使用 `/api/v1` 前缀：

#### 基础数据路由

- **分类管理**：
  - `GET /api/v1/categories` - 获取分类列表（支持树形结构）
  - `GET /api/v1/categories/{id}` - 获取分类详情
  - `POST /api/v1/categories` - 创建分类（需要管理员权限）
  - `PUT /api/v1/categories/{id}` - 更新分类（需要管理员权限）
  - `DELETE /api/v1/categories/{id}` - 删除分类（需要管理员权限）

- **地区管理**：
  - `GET /api/v1/regions` - 获取地区列表（支持树形结构）
  - `GET /api/v1/regions/{id}` - 获取地区详情
  - `POST /api/v1/regions` - 创建地区（需要管理员权限）
  - `PUT /api/v1/regions/{id}` - 更新地区（需要管理员权限）
  - `DELETE /api/v1/regions/{id}` - 删除地区（需要管理员权限）

- **标签管理**：
  - `GET /api/v1/tags` - 获取标签列表（支持分页、筛选、排序）
  - `GET /api/v1/tags/{id}` - 获取标签详情
  - `POST /api/v1/tags` - 创建标签（需要管理员权限）
  - `PUT /api/v1/tags/{id}` - 更新标签（需要管理员权限）
  - `DELETE /api/v1/tags/{id}` - 删除标签（需要管理员权限）

#### 小说管理路由

- **小说路由**：
  - `GET /api/v1/novels` - 获取小说列表（支持分页、筛选、排序）
  - `GET /api/v1/novels/{id}` - 获取小说详情
  - `POST /api/v1/novels` - 创建小说（需要作者或管理员权限）
  - `PUT /api/v1/novels/{id}` - 更新小说（需要作者或管理员权限）
  - `PUT /api/v1/novels/{id}/status` - 更新小说状态（需要作者或管理员权限）
  - `DELETE /api/v1/novels/{id}` - 删除小说（需要作者或管理员权限）

- **小说分卷路由**：
  - `GET /api/v1/novels/{id}/volumes` - 获取分卷列表
  - `GET /api/v1/novels/{id}/volumes/{volumeId}` - 获取分卷详情
  - `POST /api/v1/novels/{id}/volumes` - 创建分卷（需要作者或管理员权限）
  - `PUT /api/v1/novels/{id}/volumes/{volumeId}` - 更新分卷（需要作者或管理员权限）
  - `DELETE /api/v1/novels/{id}/volumes/{volumeId}` - 删除分卷（需要作者或管理员权限）

- **小说章节路由**：
  - `GET /api/v1/novels/{id}/chapters` - 获取章节列表
  - `GET /api/v1/novels/{id}/chapters/{chapterId}` - 获取章节详情
  - `POST /api/v1/novels/{id}/chapters` - 创建章节（需要作者或管理员权限）
  - `PUT /api/v1/novels/{id}/chapters/{chapterId}` - 更新章节（需要作者或管理员权限）
  - `DELETE /api/v1/novels/{id}/chapters/{chapterId}` - 删除章节（需要作者或管理员权限）
  - `PUT /api/v1/novels/{id}/chapters/{chapterId}/status` - 更新章节状态（需要作者或管理员权限）

#### 漫画管理路由

- **漫画路由**：
  - `GET /api/v1/comics` - 获取漫画列表（支持分页、筛选、排序）
  - `GET /api/v1/comics/{id}` - 获取漫画详情
  - `POST /api/v1/comics` - 创建漫画（需要作者或管理员权限）
  - `PUT /api/v1/comics/{id}` - 更新漫画（需要作者或管理员权限）
  - `PUT /api/v1/comics/{id}/status` - 更新漫画状态（需要作者或管理员权限）
  - `DELETE /api/v1/comics/{id}` - 删除漫画（需要作者或管理员权限）

- **漫画章节路由**：
  - `GET /api/v1/comics/{id}/chapters` - 获取章节列表
  - `GET /api/v1/comics/{id}/chapters/{chapterId}` - 获取章节详情
  - `POST /api/v1/comics/{id}/chapters` - 创建章节（需要作者或管理员权限）
  - `PUT /api/v1/comics/{id}/chapters/{chapterId}` - 更新章节（需要作者或管理员权限）
  - `DELETE /api/v1/comics/{id}/chapters/{chapterId}` - 删除章节（需要作者或管理员权限）
  - `PUT /api/v1/comics/{id}/chapters/{chapterId}/status` - 更新章节状态（需要作者或管理员权限）

#### 音频管理路由

- **音频路由**：
  - `GET /api/v1/audios` - 获取音频列表（支持分页、筛选、排序）
  - `GET /api/v1/audios/{id}` - 获取音频详情
  - `POST /api/v1/audios` - 创建音频（需要作者或管理员权限）
  - `PUT /api/v1/audios/{id}` - 更新音频（需要作者或管理员权限）
  - `PUT /api/v1/audios/{id}/status` - 更新音频状态（需要作者或管理员权限）
  - `DELETE /api/v1/audios/{id}` - 删除音频（需要作者或管理员权限）

- **音频分季路由**：
  - `GET /api/v1/audios/{id}/seasons` - 获取分季列表
  - `GET /api/v1/audios/{id}/seasons/{seasonId}` - 获取分季详情
  - `POST /api/v1/audios/{id}/seasons` - 创建分季（需要作者或管理员权限）
  - `PUT /api/v1/audios/{id}/seasons/{seasonId}` - 更新分季（需要作者或管理员权限）
  - `DELETE /api/v1/audios/{id}/seasons/{seasonId}` - 删除分季（需要作者或管理员权限）

- **音频分集路由**：
  - `GET /api/v1/audios/{id}/episodes` - 获取分集列表
  - `GET /api/v1/audios/{id}/episodes/{episodeId}` - 获取分集详情
  - `POST /api/v1/audios/{id}/episodes` - 创建分集（需要作者或管理员权限）
  - `PUT /api/v1/audios/{id}/episodes/{episodeId}` - 更新分集（需要作者或管理员权限）
  - `DELETE /api/v1/audios/{id}/episodes/{episodeId}` - 删除分集（需要作者或管理员权限）
  - `PUT /api/v1/audios/{id}/episodes/{episodeId}/status` - 更新分集状态（需要作者或管理员权限）

#### 视频管理路由

- **视频路由**：
  - `GET /api/v1/videos` - 获取视频列表（支持分页、筛选、排序）
  - `GET /api/v1/videos/{id}` - 获取视频详情
  - `POST /api/v1/videos` - 创建视频（需要作者或管理员权限）
  - `PUT /api/v1/videos/{id}` - 更新视频（需要作者或管理员权限）
  - `PUT /api/v1/videos/{id}/status` - 更新视频状态（需要作者或管理员权限）
  - `DELETE /api/v1/videos/{id}` - 删除视频（需要作者或管理员权限）

- **视频分季路由**：
  - `GET /api/v1/videos/{id}/seasons` - 获取分季列表
  - `GET /api/v1/videos/{id}/seasons/{seasonId}` - 获取分季详情
  - `POST /api/v1/videos/{id}/seasons` - 创建分季（需要作者或管理员权限）
  - `PUT /api/v1/videos/{id}/seasons/{seasonId}` - 更新分季（需要作者或管理员权限）
  - `DELETE /api/v1/videos/{id}/seasons/{seasonId}` - 删除分季（需要作者或管理员权限）

- **视频分集路由**：
  - `GET /api/v1/videos/{id}/episodes` - 获取分集列表
  - `GET /api/v1/videos/{id}/episodes/{episodeId}` - 获取分集详情
  - `POST /api/v1/videos/{id}/episodes` - 创建分集（需要作者或管理员权限）
  - `PUT /api/v1/videos/{id}/episodes/{episodeId}` - 更新分集（需要作者或管理员权限）
  - `DELETE /api/v1/videos/{id}/episodes/{episodeId}` - 删除分集（需要作者或管理员权限）
  - `PUT /api/v1/videos/{id}/episodes/{episodeId}/status` - 更新分集状态（需要作者或管理员权限）

### 9. 中间件配置

- **JWT认证中间件**：所有需要认证的路由使用JWTAuthMiddleware
- **权限中间件**：管理员操作路由使用权限中间件（如果TASK004完成）
- **CORS中间件**：如果需要跨域支持，添加CORS中间件
- **日志中间件**：添加请求日志中间件
- **限流中间件**：添加API限流中间件（可选）

### 10. 注意事项

- **路由前缀**：所有路由使用 `/api/v1` 前缀
- **HTTP方法**：遵循RESTful规范（GET查询、POST创建、PUT更新、DELETE删除）
- **路径参数**：使用 `:id`、`:volumeId`、`:chapterId`、`:seasonId`、`:episodeId` 等格式定义路径参数
- **中间件顺序**：认证中间件在权限中间件之前
- **路由分组**：按权限要求分组路由，便于管理和维护
- **嵌套路由**：分卷、章节、分季、分集等使用嵌套路由结构
- **权限控制**：基础数据管理需要管理员权限，内容管理需要作者或管理员权限

## 验收标准

1. **路由配置完整**
   - 所有内容管理路由都已配置
   - 路由路径符合规范
   - 嵌套路由结构正确

2. **中间件配置**
   - JWT认证中间件正确配置
   - 权限中间件正确配置（如果可用）

3. **路由分组**
   - 公开路由、认证路由、管理员路由正确分组
   - 路由层次清晰

4. **API规范**
   - 遵循OpenAPI 3.1.1规范
   - 路由路径符合RESTful规范
   - 路径参数命名规范

5. **代码规范**
   - 遵循Golang编码规范
   - 代码结构清晰
   - 函数职责单一

## 相关文件

- `internal/router/content_routes.go` - 内容管理路由配置文件（待创建）
- `internal/router/router.go` - 主路由配置文件（需要扩展）
- `docs/TASKS/TASK006/TASK006-27.md` - 作者管理API路由配置参考
- `docs/TASKS/TASK005/TASK005-28.md` - 用户管理API路由配置参考
- `.cursor/rules/api-design.mdc` - API设计规范

## Git 提交信息任务

任务完成后，需要生成 Git 提交信息。请根据实际修改内容生成合适的提交信息。

---

**文档版本**: 1.0  
**最后更新**: 2026-01-04 00:11:24 CST

