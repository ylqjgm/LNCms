# TASK003-76: 编写API文档（OpenAPI 3.1.1格式）

## 任务信息

**任务编号**: TASK003-76  
**父任务**: TASK003  
**任务名称**: 编写API文档（OpenAPI 3.1.1格式）  
**版本信息**: v2.0.0  
**当前状态**: 计划中  
**创建时间**: 2026-01-03 14:22:42 CST

## 任务描述

编写API文档，使用OpenAPI 3.1.1格式。包括：1) 编写所有API端点的文档；2) 定义请求和响应schema；3) 添加API描述和示例；4) 确保文档完整准确。所有文档内容必须使用中文。

## 依赖任务

- TASK003-75: 检查代码覆盖率

## 实现指南

### 1. 创建OpenAPI文档文件

在 `docs/api/openapi.yaml` 文件中创建OpenAPI文档：

```yaml
openapi: 3.1.1
info:
  title: LNCms API 文档
  version: 1.0.0
  description: LNCms系统配置和模块管理API文档
servers:
  - url: http://localhost:8080/api/v1
    description: 开发环境
paths:
  /system/config/site:
    get:
      summary: 获取网站设置
      description: 获取网站基础信息配置
      tags:
        - 系统配置
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope'
  # ... 更多端点
```

### 2. 定义Schema

在OpenAPI文档中定义所有请求和响应schema：

```yaml
components:
  schemas:
    Envelope:
      type: object
      required:
        - meta
        - data
        - errors
      properties:
        meta:
          $ref: '#/components/schemas/Meta'
        data:
          type: object
        errors:
          type: array
          items:
            $ref: '#/components/schemas/Error'
    # ... 更多schema
```

### 3. 添加API描述和示例

为每个API端点添加详细的描述和示例：

```yaml
paths:
  /system/config/site:
    get:
      summary: 获取网站设置
      description: |
        获取网站基础信息配置，包括网站名称、URL、关键字、描述等。
        此接口不需要认证，所有用户都可以访问。
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Envelope'
              example:
                meta:
                  success: true
                  code: 0
                  message: "ok"
                data:
                  site_name: "LNCms"
                  site_url: "https://example.com"
```

## 验收标准

1. **文档完整性**
   - 所有API端点都有文档
   - 所有请求和响应schema都定义完整
   - 所有API都有描述和示例

2. **文档准确性**
   - 文档与实际API实现一致
   - 请求和响应示例正确
   - 错误码和错误消息准确

3. **文档格式正确**
   - 符合OpenAPI 3.1.1规范
   - 可以通过Swagger UI等工具正确渲染
   - 文档内容使用中文

4. **文档可读性**
   - 文档结构清晰
   - 描述详细易懂
   - 示例完整实用

## 相关文件

- `docs/api/openapi.yaml` - OpenAPI文档
- `docs/api/README.md` - API文档说明
- `docs/Requirements/Core.md` - 核心模块需求文档
- `.cursor/rules/api.mdc` - API设计规范

## Git 提交信息任务

任务完成后，需要生成 Git 提交信息。请根据实际修改内容生成合适的提交信息。

---

**文档版本**: 2.0.0  
**最后更新**: 2026-01-03 14:22:42 CST

