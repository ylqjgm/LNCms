# TASK004-31: 实现作者等级达成条件枚举和常量定义

## 任务信息

**任务编号**: TASK004-31  
**父任务**: TASK004  
**任务名称**: 实现作者等级达成条件枚举和常量定义  
**版本信息**: v1.1.0  
**当前状态**: 计划中  
**创建时间**: 2026-01-03 15:34:33 CST

## 任务描述

实现作者等级达成条件枚举和常量定义。包括：1) 定义作者等级达成条件类型枚举（作品数、平均评分、推荐数、投票数、评论数、打赏数等）；2) 定义作者等级达成条件相关的常量；3) 实现枚举的字符串转换方法。所有代码必须遵循Golang编码规范。

## 依赖任务

无

## 实现指南

### 1. 定义作者等级达成条件类型枚举

在 `internal/pkg/enum/author_level_condition_type.go` 文件中定义枚举：

```go
package enum

// AuthorLevelConditionType 作者等级达成条件类型
type AuthorLevelConditionType string

const (
    // AuthorLevelConditionTypeWorksCount 作品数条件
    AuthorLevelConditionTypeWorksCount AuthorLevelConditionType = "works_count"
    
    // AuthorLevelConditionTypeAvgRating 平均评分条件
    AuthorLevelConditionTypeAvgRating AuthorLevelConditionType = "avg_rating"
    
    // AuthorLevelConditionTypeRecommendCount 推荐数条件
    AuthorLevelConditionTypeRecommendCount AuthorLevelConditionType = "recommend_count"
    
    // AuthorLevelConditionTypeVoteCount 投票数条件
    AuthorLevelConditionTypeVoteCount AuthorLevelConditionType = "vote_count"
    
    // AuthorLevelConditionTypeCommentCount 评论数条件
    AuthorLevelConditionTypeCommentCount AuthorLevelConditionType = "comment_count"
    
    // AuthorLevelConditionTypeTipCount 打赏数条件
    AuthorLevelConditionTypeTipCount AuthorLevelConditionType = "tip_count"
)

// String 返回枚举的字符串值
func (t AuthorLevelConditionType) String() string {
    return string(t)
}

// IsValid 检查枚举值是否有效
func (t AuthorLevelConditionType) IsValid() bool {
    switch t {
    case AuthorLevelConditionTypeWorksCount,
         AuthorLevelConditionTypeAvgRating,
         AuthorLevelConditionTypeRecommendCount,
         AuthorLevelConditionTypeVoteCount,
         AuthorLevelConditionTypeCommentCount,
         AuthorLevelConditionTypeTipCount:
        return true
    default:
        return false
    }
}

// GetDisplayName 获取枚举的显示名称（中文）
func (t AuthorLevelConditionType) GetDisplayName() string {
    switch t {
    case AuthorLevelConditionTypeWorksCount:
        return "作品数"
    case AuthorLevelConditionTypeAvgRating:
        return "平均评分"
    case AuthorLevelConditionTypeRecommendCount:
        return "推荐数"
    case AuthorLevelConditionTypeVoteCount:
        return "投票数"
    case AuthorLevelConditionTypeCommentCount:
        return "评论数"
    case AuthorLevelConditionTypeTipCount:
        return "打赏数"
    default:
        return "未知"
    }
}

// GetAllAuthorLevelConditionTypes 获取所有作者等级达成条件类型
func GetAllAuthorLevelConditionTypes() []AuthorLevelConditionType {
    return []AuthorLevelConditionType{
        AuthorLevelConditionTypeWorksCount,
        AuthorLevelConditionTypeAvgRating,
        AuthorLevelConditionTypeRecommendCount,
        AuthorLevelConditionTypeVoteCount,
        AuthorLevelConditionTypeCommentCount,
        AuthorLevelConditionTypeTipCount,
    }
}
```

### 2. 定义作者等级相关常量

在 `internal/pkg/constant/author_level.go` 文件中定义常量：

```go
package constant

const (
    // MinAuthorLevelConditionValue 最小作者等级达成条件值
    MinAuthorLevelConditionValue int64 = 0
    
    // MaxAuthorLevelConditionValue 最大作者等级达成条件值
    MaxAuthorLevelConditionValue int64 = 999999999
    
    // DefaultAuthorLevelConditionValue 默认作者等级达成条件值
    DefaultAuthorLevelConditionValue int64 = 0
    
    // MinAuthorLevelNameLength 最小作者等级名称长度
    MinAuthorLevelNameLength int = 1
    
    // MaxAuthorLevelNameLength 最大作者等级名称长度
    MaxAuthorLevelNameLength int = 100
    
    // MaxAuthorLevelDescriptionLength 最大作者等级描述长度
    MaxAuthorLevelDescriptionLength int = 1000
    
    // MinAuthorLevelAvgRating 最小平均评分值
    MinAuthorLevelAvgRating float64 = 0.0
    
    // MaxAuthorLevelAvgRating 最大平均评分值
    MaxAuthorLevelAvgRating float64 = 10.0
)
```

### 3. 实现枚举验证函数

在同一个文件中添加验证函数：

```go
package enum

import (
    "fmt"
)

// ValidateAuthorLevelConditionType 验证作者等级达成条件类型
func ValidateAuthorLevelConditionType(conditionType string) error {
    t := AuthorLevelConditionType(conditionType)
    if !t.IsValid() {
        return fmt.Errorf("无效的作者等级达成条件类型: %s", conditionType)
    }
    return nil
}

// ParseAuthorLevelConditionType 解析作者等级达成条件类型字符串
func ParseAuthorLevelConditionType(s string) (AuthorLevelConditionType, error) {
    t := AuthorLevelConditionType(s)
    if !t.IsValid() {
        return "", fmt.Errorf("无效的作者等级达成条件类型: %s", s)
    }
    return t, nil
}
```

### 4. 代码规范要求

- 所有注释使用中文
- 枚举类型使用字符串类型
- 枚举常量使用大写下划线命名（如AuthorLevelConditionTypeWorksCount）
- 实现String()方法返回枚举的字符串值
- 实现IsValid()方法验证枚举值是否有效
- 实现GetDisplayName()方法返回中文显示名称
- 常量定义清晰，包含注释说明

## 验收标准

1. **枚举定义完整**
   - 定义了所有作者等级达成条件类型枚举
   - 枚举值包括：works_count、avg_rating、recommend_count、vote_count、comment_count、tip_count
   - 每个枚举值都有清晰的注释说明

2. **枚举方法实现完整**
   - 实现了String()方法
   - 实现了IsValid()方法
   - 实现了GetDisplayName()方法（返回中文显示名称）
   - 实现了GetAllAuthorLevelConditionTypes()方法

3. **常量定义完整**
   - 定义了作者等级达成条件值的最小值、最大值、默认值
   - 定义了作者等级名称和描述的长度限制
   - 定义了平均评分的取值范围
   - 所有常量都有清晰的注释说明

4. **验证函数实现**
   - 实现了ValidateAuthorLevelConditionType()函数
   - 实现了ParseAuthorLevelConditionType()函数
   - 验证函数正确处理无效值

5. **代码规范符合要求**
   - 代码通过golangci-lint检查，无错误和警告
   - 代码注释完整，使用中文
   - 遵循Golang编码规范
   - 枚举和常量命名规范

## 相关文件

- `internal/pkg/enum/author_level_condition_type.go` - 作者等级达成条件类型枚举
- `internal/pkg/constant/author_level.go` - 作者等级相关常量
- `docs/TASKS/TASK004/TASK004-30.md` - 创建AuthorLevel模型任务文档
- `.cursor/rules/golang.mdc` - Golang编码规范
- `docs/TASKS/TASK004/TASK004.md` - 主任务文档

## Git 提交信息任务

任务完成后，需要生成 Git 提交信息。请根据实际修改内容生成合适的提交信息。

---

**文档版本**: 1.1.0  
**最后更新**: 2026-01-03 15:34:33 CST

