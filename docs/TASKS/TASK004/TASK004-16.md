# TASK004-16: 实现等级达成条件枚举和常量定义

## 任务信息

**任务编号**: TASK004-16  
**父任务**: TASK004  
**任务名称**: 实现等级达成条件枚举和常量定义  
**版本信息**: v1.1.0  
**当前状态**: 计划中  
**创建时间**: 2026-01-03 14:54:20 CST

## 任务描述

实现等级达成条件枚举和常量定义。包括：1) 定义等级达成条件类型枚举（积分、货币、充值数、消费数、评论数、阅读数等）；2) 定义等级达成条件相关的常量；3) 实现枚举的字符串转换方法。所有代码必须遵循Golang编码规范。

## 依赖任务

无

## 实现指南

### 1. 定义等级达成条件类型枚举

在 `internal/pkg/enum/level_condition_type.go` 文件中定义枚举：

```go
package enum

// LevelConditionType 等级达成条件类型
type LevelConditionType string

const (
    // LevelConditionTypePoints 积分条件
    LevelConditionTypePoints LevelConditionType = "points"
    
    // LevelConditionTypeCurrency 货币条件
    LevelConditionTypeCurrency LevelConditionType = "currency"
    
    // LevelConditionTypeRechargeCount 充值数条件
    LevelConditionTypeRechargeCount LevelConditionType = "recharge_count"
    
    // LevelConditionTypeConsumeCount 消费数条件
    LevelConditionTypeConsumeCount LevelConditionType = "consume_count"
    
    // LevelConditionTypeCommentCount 评论数条件
    LevelConditionTypeCommentCount LevelConditionType = "comment_count"
    
    // LevelConditionTypeReadCount 阅读数条件
    LevelConditionTypeReadCount LevelConditionType = "read_count"
)

// String 返回枚举的字符串值
func (t LevelConditionType) String() string {
    return string(t)
}

// IsValid 检查枚举值是否有效
func (t LevelConditionType) IsValid() bool {
    switch t {
    case LevelConditionTypePoints,
         LevelConditionTypeCurrency,
         LevelConditionTypeRechargeCount,
         LevelConditionTypeConsumeCount,
         LevelConditionTypeCommentCount,
         LevelConditionTypeReadCount:
        return true
    default:
        return false
    }
}

// GetDisplayName 获取枚举的显示名称（中文）
func (t LevelConditionType) GetDisplayName() string {
    switch t {
    case LevelConditionTypePoints:
        return "积分"
    case LevelConditionTypeCurrency:
        return "货币"
    case LevelConditionTypeRechargeCount:
        return "充值数"
    case LevelConditionTypeConsumeCount:
        return "消费数"
    case LevelConditionTypeCommentCount:
        return "评论数"
    case LevelConditionTypeReadCount:
        return "阅读数"
    default:
        return "未知"
    }
}

// GetAllLevelConditionTypes 获取所有等级达成条件类型
func GetAllLevelConditionTypes() []LevelConditionType {
    return []LevelConditionType{
        LevelConditionTypePoints,
        LevelConditionTypeCurrency,
        LevelConditionTypeRechargeCount,
        LevelConditionTypeConsumeCount,
        LevelConditionTypeCommentCount,
        LevelConditionTypeReadCount,
    }
}
```

### 2. 定义等级相关常量

在 `internal/pkg/constant/level.go` 文件中定义常量：

```go
package constant

const (
    // MinLevelConditionValue 最小等级达成条件值
    MinLevelConditionValue int64 = 0
    
    // MaxLevelConditionValue 最大等级达成条件值
    MaxLevelConditionValue int64 = 999999999
    
    // DefaultLevelConditionValue 默认等级达成条件值
    DefaultLevelConditionValue int64 = 0
    
    // MinLevelNameLength 最小等级名称长度
    MinLevelNameLength int = 1
    
    // MaxLevelNameLength 最大等级名称长度
    MaxLevelNameLength int = 100
    
    // MaxLevelDescriptionLength 最大等级描述长度
    MaxLevelDescriptionLength int = 1000
)
```

### 3. 实现枚举验证函数

在同一个文件中添加验证函数：

```go
package enum

import (
    "fmt"
)

// ValidateLevelConditionType 验证等级达成条件类型
func ValidateLevelConditionType(conditionType string) error {
    t := LevelConditionType(conditionType)
    if !t.IsValid() {
        return fmt.Errorf("无效的等级达成条件类型: %s", conditionType)
    }
    return nil
}

// ParseLevelConditionType 解析等级达成条件类型字符串
func ParseLevelConditionType(s string) (LevelConditionType, error) {
    t := LevelConditionType(s)
    if !t.IsValid() {
        return "", fmt.Errorf("无效的等级达成条件类型: %s", s)
    }
    return t, nil
}
```

### 4. 代码规范要求

- 所有注释使用中文
- 枚举类型使用字符串类型
- 枚举常量使用大写下划线命名（如LevelConditionTypePoints）
- 实现String()方法返回枚举的字符串值
- 实现IsValid()方法验证枚举值是否有效
- 实现GetDisplayName()方法返回中文显示名称
- 常量定义清晰，包含注释说明

## 验收标准

1. **枚举定义完整**
   - 定义了所有等级达成条件类型枚举
   - 枚举值包括：points、currency、recharge_count、consume_count、comment_count、read_count
   - 每个枚举值都有清晰的注释说明

2. **枚举方法实现完整**
   - 实现了String()方法
   - 实现了IsValid()方法
   - 实现了GetDisplayName()方法（返回中文显示名称）
   - 实现了GetAllLevelConditionTypes()方法

3. **常量定义完整**
   - 定义了等级达成条件值的最小值、最大值、默认值
   - 定义了等级名称和描述的长度限制
   - 所有常量都有清晰的注释说明

4. **验证函数实现**
   - 实现了ValidateLevelConditionType()函数
   - 实现了ParseLevelConditionType()函数
   - 验证函数正确处理无效值

5. **代码规范符合要求**
   - 代码通过golangci-lint检查，无错误和警告
   - 代码注释完整，使用中文
   - 遵循Golang编码规范
   - 枚举和常量命名规范

## 相关文件

- `internal/pkg/enum/level_condition_type.go` - 等级达成条件类型枚举
- `internal/pkg/constant/level.go` - 等级相关常量
- `docs/TASKS/TASK004/TASK004-15.md` - 创建Level模型任务文档
- `.cursor/rules/golang.mdc` - Golang编码规范
- `docs/TASKS/TASK004/TASK004.md` - 主任务文档

## Git 提交信息任务

任务完成后，需要生成 Git 提交信息。请根据实际修改内容生成合适的提交信息。

---

**文档版本**: 1.1.0  
**最后更新**: 2026-01-03 14:54:20 CST

