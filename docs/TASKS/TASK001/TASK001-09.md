# TASK001-09: 定义PostgreSQL连接配置结构体

## 任务信息

**任务编号**: TASK001-09  
**父任务**: TASK001  
**任务名称**: 定义PostgreSQL连接配置结构体  
**版本信息**: v1.0.0  
**当前状态**: 计划中  
**创建时间**: 2026-01-02 21:44:12 CST

## 任务描述

定义PostgreSQL数据库连接配置结构体，包含主机、端口、用户名、密码、数据库名、连接池参数等配置项。

## 依赖任务

- TASK001-03: 定义配置结构体

## 实现指南

### 1. 创建数据库配置结构体文件

在 `internal/database/config.go` 中定义PostgreSQLConfig结构体。

### 2. 定义PostgreSQLConfig结构体

定义PostgreSQL数据库连接配置结构体：

```go
// PostgreSQLConfig PostgreSQL数据库连接配置
type PostgreSQLConfig struct {
    Host            string        `mapstructure:"host" json:"host"`                         // 数据库主机
    Port            int           `mapstructure:"port" json:"port"`                         // 数据库端口
    User            string        `mapstructure:"user" json:"user"`                         // 数据库用户名
    Password        string        `mapstructure:"password" json:"password"`                 // 数据库密码
    Database        string        `mapstructure:"database" json:"database"`                // 数据库名称
    MaxOpenConns    int           `mapstructure:"max_open_conns" json:"max_open_conns"`     // 最大打开连接数
    MaxIdleConns    int           `mapstructure:"max_idle_conns" json:"max_idle_conns"`     // 最大空闲连接数
    ConnMaxLifetime time.Duration `mapstructure:"conn_max_lifetime" json:"conn_max_lifetime"` // 连接最大生存时间
    SSLMode         string        `mapstructure:"ssl_mode" json:"ssl_mode"`                 // SSL模式：disable、require、verify-ca、verify-full
    TimeZone        string        `mapstructure:"time_zone" json:"time_zone"`               // 时区
}
```

### 3. 包含连接池配置字段

包含连接池配置字段：
- `MaxOpenConns` - 最大打开连接数
- `MaxIdleConns` - 最大空闲连接数
- `ConnMaxLifetime` - 连接最大生存时间

### 4. 包含SSL配置字段（如需要）

包含SSL配置字段：
- `SSLMode` - SSL模式

### 5. 为所有字段添加适当的标签和中文注释

为所有字段添加 `mapstructure` 和 `json` 标签，并添加中文注释。

### 6. 实现从全局Config结构体读取数据库配置的方法

实现从全局Config结构体读取数据库配置的方法：

```go
// GetPostgreSQLConfig 从全局配置获取PostgreSQL配置
func GetPostgreSQLConfig(config *config.Config) *PostgreSQLConfig {
    return &PostgreSQLConfig{
        Host:            config.Database.Host,
        Port:            config.Database.Port,
        User:            config.Database.User,
        Password:        config.Database.Password,
        Database:        config.Database.Database,
        MaxOpenConns:    config.Database.MaxOpenConns,
        MaxIdleConns:    config.Database.MaxIdleConns,
        ConnMaxLifetime: config.Database.ConnMaxLifetime,
        SSLMode:         config.Database.SSLMode,
        TimeZone:        config.Database.TimeZone,
    }
}
```

## 验收标准

1. **PostgreSQLConfig结构体已定义**
   - 结构体定义完整
   - 结构体命名符合Go规范

2. **包含所有必需的配置字段**
   - Host字段已定义
   - Port字段已定义
   - User字段已定义
   - Password字段已定义
   - Database字段已定义
   - 连接池配置字段已定义
   - SSL配置字段已定义（如需要）

3. **字段标签和注释完整**
   - 所有字段都有mapstructure标签
   - 所有字段都有json标签
   - 所有字段都有中文注释

4. **可以从全局Config读取配置**
   - GetPostgreSQLConfig函数已实现
   - 可以正确从全局Config读取配置
   - 配置映射正确

## 相关文件

- `internal/database/config.go` - 数据库连接配置结构体定义文件

## Git 提交信息任务

任务完成后，需要生成 Git 提交信息。请根据实际修改内容生成合适的提交信息。

---

**文档版本**: 1.0  
**最后更新**: 2026-01-02 21:44:12 CST
