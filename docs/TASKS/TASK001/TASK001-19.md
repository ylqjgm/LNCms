# TASK001-19: 定义Elasticsearch连接配置结构体

## 任务信息

**任务编号**: TASK001-19  
**父任务**: TASK001  
**任务名称**: 定义Elasticsearch连接配置结构体  
**版本信息**: v1.0.0  
**当前状态**: 计划中  
**创建时间**: 2026-01-02 21:44:12 CST

## 任务描述

定义Elasticsearch搜索连接配置结构体，包含URL列表、用户名、密码、索引前缀等配置项。

## 依赖任务

- TASK001-03: 定义配置结构体

## 实现指南

### 1. 创建Elasticsearch配置结构体文件

在 `internal/search/config.go` 中定义ElasticsearchConfig结构体。

### 2. 定义ElasticsearchConfig结构体

定义Elasticsearch搜索连接配置结构体：

```go
// ElasticsearchConfig Elasticsearch搜索连接配置
type ElasticsearchConfig struct {
    URLs        []string      `mapstructure:"urls" json:"urls"`               // Elasticsearch URL列表
    Username    string        `mapstructure:"username" json:"username"`       // 用户名（如果需要认证）
    Password    string        `mapstructure:"password" json:"password"`       // 密码（如果需要认证）
    IndexPrefix string        `mapstructure:"index_prefix" json:"index_prefix"` // 索引前缀
    Timeout     time.Duration `mapstructure:"timeout" json:"timeout"`         // 连接超时时间
    Sniff       bool          `mapstructure:"sniff" json:"sniff"`             // 是否启用节点嗅探
}
```

### 3. 包含URLs字段

包含URLs字段（支持多个Elasticsearch节点），使用字符串切片类型。

### 4. 包含Username、Password字段

包含Username、Password字段（如需要认证）。

### 5. 包含IndexPrefix字段

包含IndexPrefix字段（索引前缀），用于统一管理索引命名。

### 6. 包含超时配置字段

包含超时配置字段（如需要），如连接超时时间。

### 7. 为所有字段添加适当的标签和中文注释

为所有字段添加 `mapstructure` 和 `json` 标签，并添加中文注释。

### 8. 实现从全局Config结构体读取Elasticsearch配置的方法

实现从全局Config结构体读取Elasticsearch配置的方法：

```go
// GetElasticsearchConfig 从全局配置获取Elasticsearch配置
func GetElasticsearchConfig(config *config.Config) *ElasticsearchConfig {
    return &ElasticsearchConfig{
        URLs:        config.Elasticsearch.URLs,
        Username:    config.Elasticsearch.Username,
        Password:    config.Elasticsearch.Password,
        IndexPrefix: config.Elasticsearch.IndexPrefix,
        Timeout:     config.Elasticsearch.Timeout,
        Sniff:       config.Elasticsearch.Sniff,
    }
}
```

## 验收标准

1. **ElasticsearchConfig结构体已定义**
   - 结构体定义完整
   - 结构体命名符合Go规范

2. **包含所有必需的配置字段**
   - URLs字段已定义
   - Username字段已定义
   - Password字段已定义
   - IndexPrefix字段已定义
   - 超时配置字段已定义（如需要）

3. **字段标签和注释完整**
   - 所有字段都有mapstructure标签
   - 所有字段都有json标签
   - 所有字段都有中文注释

4. **可以从全局Config读取配置**
   - GetElasticsearchConfig函数已实现
   - 可以正确从全局Config读取配置
   - 配置映射正确

## 相关文件

- `internal/search/config.go` - Elasticsearch连接配置结构体定义文件

## Git 提交信息任务

任务完成后，需要生成 Git 提交信息。请根据实际修改内容生成合适的提交信息。

---

**文档版本**: 1.0  
**最后更新**: 2026-01-02 21:44:12 CST

