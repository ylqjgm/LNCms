# TASK001-14: 定义Redis连接配置结构体

## 任务信息

**任务编号**: TASK001-14  
**父任务**: TASK001  
**任务名称**: 定义Redis连接配置结构体  
**版本信息**: v1.0.0  
**当前状态**: 计划中  
**创建时间**: 2026-01-02 21:44:12 CST

## 任务描述

定义Redis缓存连接配置结构体，包含主机、端口、密码、数据库编号、连接池参数等配置项。

## 依赖任务

- TASK001-03: 定义配置结构体

## 实现指南

### 1. 创建Redis配置结构体文件

在 `internal/cache/config.go` 中定义RedisConfig结构体。

### 2. 定义RedisConfig结构体

定义Redis缓存连接配置结构体：

```go
// RedisConfig Redis缓存连接配置
type RedisConfig struct {
    Host         string        `mapstructure:"host" json:"host"`                   // Redis主机
    Port         int           `mapstructure:"port" json:"port"`                   // Redis端口
    Password     string        `mapstructure:"password" json:"password"`           // Redis密码
    DB           int           `mapstructure:"db" json:"db"`                       // 数据库编号
    PoolSize     int           `mapstructure:"pool_size" json:"pool_size"`         // 连接池大小
    MinIdleConns int           `mapstructure:"min_idle_conns" json:"min_idle_conns"` // 最小空闲连接数
    MaxConnAge   time.Duration `mapstructure:"max_conn_age" json:"max_conn_age"`   // 连接最大生存时间
    DialTimeout  time.Duration `mapstructure:"dial_timeout" json:"dial_timeout"`   // 连接超时时间
    ReadTimeout  time.Duration `mapstructure:"read_timeout" json:"read_timeout"`   // 读取超时时间
    WriteTimeout time.Duration `mapstructure:"write_timeout" json:"write_timeout"` // 写入超时时间
}
```

### 3. 包含连接池配置字段

包含连接池配置字段：
- `PoolSize` - 连接池大小
- `MinIdleConns` - 最小空闲连接数
- `MaxConnAge` - 连接最大生存时间

### 4. 包含超时配置字段

包含超时配置字段：
- `DialTimeout` - 连接超时时间
- `ReadTimeout` - 读取超时时间
- `WriteTimeout` - 写入超时时间

### 5. 为所有字段添加适当的标签和中文注释

为所有字段添加 `mapstructure` 和 `json` 标签，并添加中文注释。

### 6. 实现从全局Config结构体读取Redis配置的方法

实现从全局Config结构体读取Redis配置的方法：

```go
// GetRedisConfig 从全局配置获取Redis配置
func GetRedisConfig(config *config.Config) *RedisConfig {
    return &RedisConfig{
        Host:         config.Redis.Host,
        Port:         config.Redis.Port,
        Password:     config.Redis.Password,
        DB:           config.Redis.DB,
        PoolSize:     config.Redis.PoolSize,
        MinIdleConns: config.Redis.MinIdleConns,
        MaxConnAge:   config.Redis.MaxConnAge,
        DialTimeout:  config.Redis.DialTimeout,
        ReadTimeout:  config.Redis.ReadTimeout,
        WriteTimeout: config.Redis.WriteTimeout,
    }
}
```

## 验收标准

1. **RedisConfig结构体已定义**
   - 结构体定义完整
   - 结构体命名符合Go规范

2. **包含所有必需的配置字段**
   - Host字段已定义
   - Port字段已定义
   - Password字段已定义
   - DB字段已定义
   - 连接池配置字段已定义
   - 超时配置字段已定义

3. **字段标签和注释完整**
   - 所有字段都有mapstructure标签
   - 所有字段都有json标签
   - 所有字段都有中文注释

4. **可以从全局Config读取配置**
   - GetRedisConfig函数已实现
   - 可以正确从全局Config读取配置
   - 配置映射正确

## 相关文件

- `internal/cache/config.go` - Redis连接配置结构体定义文件

## Git 提交信息任务

任务完成后，需要生成 Git 提交信息。请根据实际修改内容生成合适的提交信息。

---

**文档版本**: 1.0  
**最后更新**: 2026-01-02 21:44:12 CST

