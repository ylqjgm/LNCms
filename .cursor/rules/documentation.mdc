---
globs: ["**/*.md", "**/*.mdx", "**/docs/**", "**/README*", "**/CHANGELOG*"]
description: "通用文档编写规范规则 - 定义文档编写规范，要求所有文档使用中文编写，时间使用 Asia/Shanghai 时区，规范 CONTEXT.md 文档更新流程"
alwaysApply: true
---

# 通用文档编写规范

本文档定义了项目中所有文档编写必须遵循的规范要求，确保文档的一致性、准确性和可维护性。

**重要提示：所有文档编写操作都必须遵循本规范要求。任何违反规范的行为都可能导致文档质量下降或信息不准确。**

## 语言要求

### 中文编写要求

- **所有文档必须使用中文编写**
- 文档标题、正文内容、代码注释、错误消息、示例说明等都必须使用中文
- 技术术语可以使用英文，但应在首次出现时提供中文解释
- 代码标识符（函数名、变量名、类型名等）可以保持英文，但相关说明必须使用中文

```markdown
# 好的做法
## 用户管理功能
本文档说明用户管理功能的使用方法。

# 不好的做法
## User Management
This document describes how to use user management features.
```

### 语言一致性

- 同一文档内应保持语言风格一致
- 使用规范的简体中文
- 避免使用口语化表达
- 使用专业的技术术语

## 时间处理规范

### 时区要求

- **所有文档涉及到的时间，必须通过本地 Asia/Shanghai 时区进行时间验证**
- 时间格式统一使用：`YYYY-MM-DD HH:MM:SS CST` 或 `YYYY-MM-DD HH:MM:SS +08:00`
- 时间验证应确保时间戳转换为 Asia/Shanghai 时区后正确显示

### 时间格式

```markdown
# 标准时间格式
2026-01-02 19:19:25 CST
2026-01-02 19:19:25 +08:00

# 日期格式（不包含时间）
2026-01-02

# 在文档中使用时间
本文档最后更新时间：2026-01-02 19:19:25 CST
```

### 时间获取方式

- 使用系统命令获取 Asia/Shanghai 时区的当前时间
- 在 Unix/Linux/macOS 系统中使用：`TZ=Asia/Shanghai date '+%Y-%m-%d %H:%M:%S %Z'`
- 时间戳应精确到秒级别
- 对于文档更新日志，应记录到分钟级别：`date '+%Y-%m-%d %H:%M'`

```bash
# 获取 Asia/Shanghai 时区的当前时间
TZ=Asia/Shanghai date '+%Y-%m-%d %H:%M:%S %Z'

# 获取日期和时间（精确到分钟）
TZ=Asia/Shanghai date '+%Y-%m-%d %H:%M'
```

## CONTEXT.md 文档更新规范

### 更新要求

- **每次完成对话后，必须将对话内容进行整理后，更新至 `docs/CONTEXT/CONTEXT.md` 文档中**
- 更新内容应包含：
  - 任务描述
  - 执行过程
  - 最终结果
  - 创建或修改的文件
  - 相关文件说明

### 文档更新格式

```markdown
## YYYY-MM-DD HH:MM:SS CST - 任务标题

### 任务描述

任务的具体描述和要求。

### 执行过程

#### 1. 第一步
详细说明第一步的执行过程。

#### 2. 第二步
详细说明第二步的执行过程。

### 最终结果

总结任务的最终结果和重要决策。

### 创建的文件

- `文件路径` - 文件说明

### 相关文件

- 相关文件的说明和关系
```

### 日期更名规则

- **每次更新 `docs/CONTEXT/CONTEXT.md` 文档时，若当前文档内容已是当日之前的内容，请将文档进行日期更名，重新创建 CONTEXT.md 文档后进行写入**

#### 更名规则

1. **检查文档最后更新时间**：
   - 读取 `docs/CONTEXT/CONTEXT.md` 文档
   - 查找文档中最后一条记录的日期时间
   - 判断该日期时间是否为当日

2. **日期更名流程**：
   - 如果最后一条记录的日期不是当日：
     - 将现有文档重命名为：`docs/CONTEXT/CONTEXT_YYYY-MM-DD.md`（使用最后一条记录的日期）
     - 创建新的 `docs/CONTEXT/CONTEXT.md` 文件
     - 在新文件中写入文档头部和新的内容

3. **重命名格式**：
   - 使用格式：`CONTEXT_YYYY-MM-DD.md`
   - 例如：`CONTEXT_2026-01-02.md`

4. **新文档格式**：
   - 新文档应包含文档头部说明
   - 第一条记录应为当前对话的内容
   - 时间使用当前 Asia/Shanghai 时区时间

```bash
# 检查文档最后更新日期（伪代码示例）
# 1. 读取 CONTEXT.md，获取最后一条记录的日期
# 2. 获取当前日期（Asia/Shanghai 时区）
# 3. 如果最后一条记录日期 < 当前日期：
#    - 重命名：mv docs/CONTEXT/CONTEXT.md docs/CONTEXT/CONTEXT_YYYY-MM-DD.md
#    - 创建新的 CONTEXT.md 文件
#    - 写入新的内容
```

### 更新示例

```markdown
# 项目上下文文档

本文档记录项目开发过程中的重要对话和决策。

## 2026-01-03 10:30:00 CST - 新任务标题

### 任务描述
任务描述内容...

### 执行过程
执行过程说明...

### 最终结果
最终结果说明...

### 创建的文件
- `文件路径` - 文件说明
```

## 文档结构规范

### 文档头部

- 每个文档应包含清晰的标题
- 标题应准确反映文档内容
- 对于长文档，应包含目录（Table of Contents）

```markdown
# 文档标题

简短描述文档的目的和内容。

## 目录

- [章节1](#章节1)
- [章节2](#章节2)
```

### 章节组织

- 使用清晰的层次结构（#、##、### 等）
- 章节标题应简洁明了
- 相关内容应组织在同一章节中
- 使用适当的分隔和空行

### 代码示例

- 代码示例应清晰、完整
- 使用适当的代码块标记语言类型
- 提供必要的注释说明
- 代码示例应可直接运行或易于理解

```markdown
```go
// 代码示例说明
func ExampleFunction() {
    // 代码内容
}
```
```

## 文档内容规范

### 准确性要求

- 文档内容应准确反映实际情况
- 及时更新过时的信息
- 确保代码示例与实际代码一致
- 验证链接的有效性

### 完整性要求

- 文档应包含必要的信息
- 不遗漏重要的步骤或说明
- 提供完整的示例和说明
- 包含必要的上下文信息

### 可读性要求

- 使用清晰的表达方式
- 避免过长的段落
- 使用列表和表格提高可读性
- 使用适当的强调（粗体、斜体等）

### 一致性要求

- 术语使用应一致
- 格式风格应统一
- 命名规范应遵循项目约定
- 代码风格应与项目代码规范一致

## 文档维护规范

### 版本控制

- 文档应与代码一起进行版本控制
- 重要变更应记录在更新日志中
- 文档更新应有清晰的提交信息

### 定期审查

- 定期审查文档的准确性
- 更新过时的内容
- 补充缺失的信息
- 优化文档结构

### 反馈收集

- 收集用户对文档的反馈
- 根据反馈改进文档
- 记录常见的疑问和解答

## Markdown 规范

### 标题

- 使用 `#` 创建标题，从一级标题开始
- 标题后空一行
- 标题层级不应跳级（如不要从 ## 直接跳到 ####）

### 列表

- 有序列表使用数字加点
- 无序列表使用 `-` 或 `*`
- 列表项之间保持一致的缩进
- 列表后空一行

### 链接

- 使用描述性的链接文本
- 内部链接使用相对路径
- 外部链接应验证有效性

```markdown
[链接文本](路径或URL)
```

### 图片

- 使用描述性的 alt 文本
- 图片路径使用相对路径
- 图片应有适当的尺寸和格式

```markdown
![图片描述](图片路径)
```

### 表格

- 使用 Markdown 表格语法
- 表格应对齐整齐
- 表头应清晰描述列内容

### 代码块

- 使用三个反引号创建代码块
- 指定代码语言类型
- 代码块前后空一行

```markdown
```语言类型
代码内容
```
```

### 引用

- 使用 `>` 创建引用块
- 引用内容应准确
- 引用后可添加来源说明

```markdown
> 引用内容

—— 来源说明
```

## 特殊文档类型规范

### README.md

- 应包含项目简介
- 包含安装和运行说明
- 包含使用示例
- 包含贡献指南（如适用）
- 包含许可证信息

### CHANGELOG.md

- 按时间倒序排列
- 使用清晰的版本号或日期
- 分类说明变更（新增、修复、变更等）
- 使用 Asia/Shanghai 时区时间

### API 文档

- 包含完整的接口说明
- 包含请求和响应示例
- 包含错误码说明
- 包含认证和授权说明

### 架构文档

- 包含清晰的架构图
- 说明各模块的职责
- 说明模块间的交互
- 包含技术选型说明

## 文档审查清单

编写或更新文档时，应检查以下项目：

1. **语言规范**
   - [ ] 所有内容都使用中文编写
   - [ ] 技术术语有适当的中文解释
   - [ ] 语言风格一致

2. **时间规范**
   - [ ] 所有时间都使用 Asia/Shanghai 时区
   - [ ] 时间格式统一
   - [ ] 时间准确无误

3. **CONTEXT.md 更新**
   - [ ] 对话完成后已更新 CONTEXT.md
   - [ ] 如果文档是前一日期，已进行日期更名
   - [ ] 更新内容完整、准确

4. **文档结构**
   - [ ] 标题层次清晰
   - [ ] 章节组织合理
   - [ ] 目录完整（如适用）

5. **文档内容**
   - [ ] 内容准确、完整
   - [ ] 代码示例正确
   - [ ] 链接有效
   - [ ] 格式规范

6. **可读性**
   - [ ] 表达清晰
   - [ ] 使用适当的格式（列表、表格等）
   - [ ] 段落长度适当

## 总结

遵循以上文档编写规范可以确保文档的质量和一致性。在编写文档时，应该：

1. **始终使用中文编写所有文档内容**
2. **所有时间使用 Asia/Shanghai 时区进行验证和显示**
3. **每次对话完成后，及时更新 CONTEXT.md 文档**
4. **更新 CONTEXT.md 时，如果文档内容已是前一日期，应先进行日期更名，再创建新文档**
5. **保持文档结构清晰、内容准确、格式规范**
6. **定期审查和更新文档，确保文档的时效性**

**文档是项目的重要组成部分，高质量的文档有助于项目的维护和协作。所有文档编写操作都必须严格遵循本规范要求。**
